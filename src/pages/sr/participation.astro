---
import { astroI18n, t } from "astro-i18n";

import Headline from "@components/Headline.astro";
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import FlowerDivider from "@components/FlowerDivider.astro";

const locale = astroI18n.locale ?? "en";

// SVARGA: DE + RU locale GoogleForm lins:
//  - DE https://docs.google.com/forms/d/e/1FAIpQLScTOWuc8GeWRhgClebcAGIZVq6IduIskBtK1sQhsNFECgGykw/viewform
//  - RU https://docs.google.com/forms/d/e/1FAIpQLSc1HgHdRrA0jTbVAjKmwQmm_nrbep6TbIe8UjpOr4mcfTo8uw/viewform
// CHECK ALSO iframe height attribute, if it can fit all forms without a scrollbar

const GOOGLE_FORM_URL =
  locale === "sr"
    ? "https://docs.google.com/forms/d/e/1FAIpQLScDC6Hp0NXHb43LgQs_vgjsRflMC1znHXr76wxBhNaxD9eg6A/viewform"
    : "https://docs.google.com/forms/d/e/1FAIpQLSefR81EPixSy8eeBQGfR9ik6Y5457f5tJCQFIkN1AZiTU_c8g/viewform";
const GOOGLE_FORM_IFRAME_LINK = `${GOOGLE_FORM_URL}?embedded=true&hl=${locale}`;
const GOOGLE_FORM_LINK = `${GOOGLE_FORM_URL}?usp=sf_link&hl=${locale}`;
---

<Layout>
  <Container>
    <Headline top={t("participation.headline.top")}>{t("participation.headline.main")}</Headline>

    <iframe
      src={GOOGLE_FORM_IFRAME_LINK}
      width="100%"
      height="3250"
      frameborder="0"
      marginheight="0"
      marginwidth="0"
      loading="lazy"></iframe>

    <div role="alert" class="alert bg-white">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-primary h-6 w-6 shrink-0"
        ><path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg
      >
      <div class="w-full min-w-0">
        <h4 class="text-sm">{t("participation.problem.headline")}</h4>
        <div class="text-xs break-normal">{t("participation.problem.text")}</div>
        <a class="link link-primary text-xs break-words" href={GOOGLE_FORM_LINK} target="_blank">{GOOGLE_FORM_LINK}</a>
      </div>
    </div>
  </Container>

  <FlowerDivider type="2" />
</Layout>
